package dev.logging4j.currymod.module.modules.exploit;

import de.florianmichael.dietrichevents2.DietrichEvents2;
import dev.logging4j.currymod.listener.IPacketSendListener;
import dev.logging4j.currymod.module.Module;
import net.minecraft.network.packet.c2s.play.CloseHandledScreenC2SPacket;

@Module.Info(name = "XCarry", description = "Carry items in the crafting menu.", category = Module.Category.EXPLOIT)
public class XCarry extends Module implements IPacketSendListener {

    @Override
    protected void onEnable() {
        DietrichEvents2.global().subscribe(PacketSendEvent.ID, this);
    }

    @Override
    protected void onDisable() {
        DietrichEvents2.global().unsubscribe(PacketSendEvent.ID, this);
    }

    @Override
    public void onPacketSend(PacketSendEvent event) {
        if (event.getPacket() instanceof CloseHandledScreenC2SPacket packet) {
            if (packet.getSyncId() == mc.player.playerScreenHandler.syncId) {
                event.cancel();
            }
        }
    }
}
