package dev.l4j.currymod.client.module.modules.exploit;

import dev.l4j.currymod.client.module.Module;
import net.minecraft.entity.vehicle.BoatEntity;
import net.minecraft.network.packet.c2s.play.VehicleMoveC2SPacket;
import net.minecraft.util.math.Vec3d;

@Module.Info(name = "BoatExecute", description = "Funny boat kill", category = Module.Category.EXPLOIT)
public class BoatExecute extends Module {

    @Override
    protected void onEnable() {
        if(nullCheck() || !(mc.player.getVehicle() instanceof BoatEntity boat)) {
            toggle();
            return;
        }
        Vec3d originalPos = boat.getPos();
        boat.setPosition(originalPos.add(0, 0.05, 0));
        VehicleMoveC2SPacket groundPacket = new VehicleMoveC2SPacket(boat.getPos(), boat.getYaw(), boat.getPitch(), boat.isOnGround());
        boat.setPosition(originalPos.add(0, 20, 0));
        VehicleMoveC2SPacket skyPacket = new VehicleMoveC2SPacket(boat.getPos(), boat.getYaw(), boat.getPitch(), boat.isOnGround());
        boat.setPosition(originalPos);
        for (int i = 0; i < 20; i++){
            send(skyPacket);
            send(groundPacket);
        }

        send(new VehicleMoveC2SPacket(boat.getPos(), boat.getYaw(), boat.getPitch(), boat.isOnGround()));
        toggle();
    }

    @Override
    protected void onDisable() {

    }
}
